!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";(()=>{const e="https://ogzp9le070.execute-api.us-west-2.amazonaws.com/prod",t=Object.freeze({COURSE_CODE:0,LETTER_GRADE:3}),n=Object.freeze({SECTION:1,STANDING:10}),o=Object.freeze({KEEP_NO_GRADE_ROW:1,KEEP_SECTION_COLUMN:2,KEEP_STANDING_COLUMN:4});function r(e){const t=new RegExp(String.fromCharCode(160),"g");return e.replace(t,"").replace(/\s/g,"")}const i=document.querySelector("#iframe-main").contentWindow.document;var c;c=i,["#calculator_title","#calculator_title_text",".ui-tabs-nav"].forEach((function(e){c.querySelector(e).remove()})),c.querySelector("h1").setAttribute("style","margin:10px 0 -20px 70px;"),c.querySelector("#header-invisible img").setAttribute("style","margin-bottom: 15px;"),c.querySelector("#tabs").setAttribute("style","margin: 0px auto; width:800px");const l=i.querySelector("#allSessionsGrades").children[0],a=l.children;let s=[];const u=prompt("\n    001: Keep courses with no grades\n\n    010: Keep the section column\n\n    100: Keep the standing column\n\n    0: Default behaviour (Remove all clutter)\n\n    e.g Type 011 to enable the first 2 options\n    ","0"),d=function(e){return{removeNoGradeRow:!(e&o.KEEP_NO_GRADE_ROW),removeSectionColumn:!(e&o.KEEP_SECTION_COLUMN),removeStandingColumn:!(e&o.KEEP_STANDING_COLUMN)}}(parseInt(u,2));for(let e=a.length-1;e>=0;e--){const o=a[e],i=o.children[t.LETTER_GRADE].innerText;if(d.removeNoGradeRow&&""===i){l.removeChild(o);continue}const c=r(o.children[t.COURSE_CODE].innerText);""!==c&&"Course"!==c&&s.push(c),d.removeStandingColumn&&o.removeChild(o.children[n.STANDING]),d.removeSectionColumn&&o.removeChild(o.children[n.SECTION]);let u=o.insertCell(1);u.style.textAlign="center",0===e?(u.innerText="Course Name",u.classList.add("listHeader")):(u.id=c,u.classList.add("listRow"))}let p="";for(let e=0;e<s.length;e++){p+=`c${e}=${s[e]}&`}p+="digest_key="+function(e,t=2166136261){let n=t;for(let t=0,o=e.length;t<o;t++)n^=e.charCodeAt(t),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return("0000000"+(n>>>0).toString(16)).substr(-8)}(s.join());const f=e+"/courses?"+p,m=new Map;fetch(f,{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},mode:"cors"}).then(e=>e.json()).catch(e=>{console.log(e),alert("\n            Something went wrong contacting the back-end server. \n            Perhaps you are using an old version of the bookmarklet?\n            Go to https://ubc-courses-frontend.s3-us-west-2.amazonaws.com/index.html (Check if the back-end is online) and drag the bookmarklet into your bookmarks again.\n            If it is still broken contact /u/arashout on reddit")}).then(e=>{s.forEach(t=>{console.assert(t===r(t)),t=r(t);const n=i.getElementById(t);n.contentEditable="true",n.innerText=e[t],n.setAttribute("data-initial-text",n.innerText),n.addEventListener("blur",()=>{n.getAttribute("data-initial-text")!==n.innerText&&m.set(n.id,n.innerText)})})});const h=i.getElementById("printer");console.assert(!!h),h.addEventListener("click",()=>{if(m.size>0){let t="";m.forEach((e,n)=>{t+=`${n}=${e}&`}),fetch(`${e}/courses/suggest?${t}`,{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},mode:"cors"}).then(()=>console.log(t)).catch(e=>console.error(e))}})})()}]);